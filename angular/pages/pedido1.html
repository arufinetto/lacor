

<div class="container" ng-controller="pedidoController">
<form class="form-horizontal">
    <!--<div class="form-group">
        <label class="control-label col-sm-2" for="pedidoid">NÃºmero de Pedido:</label>
		<div class="col-sm-10">
        <input type="text" class="form-control" id="pedidoid" readonly="true" ng-model="newPedido.numero">
		</div>
    </div>-->
	<div class="form-group row" ng-controller="pacienteController">
        <label class="control-label" for="paciente">Paciente:</label>
        <input type="text" class="form-control" ng-model="pacienteSelected" id="paciente" placeholder="Ingrese el nombre del paciente..."/>
		<div class="form-group row" ng-show="!isEmpty(pacienteSelected)">
			<table class="table table-striped">
				<thead>
				</thead>
				<tbody ng-repeat="paciente in pacienteList | filter:pacienteSelected">
				<tr>
					<td>{{paciente.nombre}}</td>
					<td>{{paciente.apellido}}</td>
					<td><a href ng-click="agregarPaciente(paciente)" ng-model="newPedido.paciente" data-toggle="collapse"><span class="glyphicon glyphicon-plus"></span></a>
					</td>
				</tr>
				</tbody>
			</table>
		</div>
    </div>
	

	<div class="form-group row" ng-show="newPedido.paciente!=null">
	<label class="control-label" for="obrasocial">Obra Social/Prepaga:</label>
	  <div id="obrasocial">
			 <select ng-options="prestador.nombre as prestador.nombre for prestador in prestadores"  class="form-control" id="prestador" ng-model="">
			<option ng-value={{prestador.nombre}}>{{prestador.nombre}}</option>
			</select>

		 <div id="afiliado" class="form-group row ">
			<label class="control-label col-sm-2" for="afiliado">Numero de Afiliado:</label>
			<input type="text" id="afiliado"  maxlength="40" ng-model="newPaciente.afiliado" class="form-control"/>
		</div>
		</div>
	</div>
	
	<div class="form-group row">
	<label class="control-label" for="derivador">Derivador:</label>
	  <div id="derivador" class="col-sm-10">
		<label class="radio-inline">
		  <input type="radio" ng-model="newPedido.derivador" value="Ambulatorio" name="optradio">Ambulatorio
		</label>
		<label class="radio-inline">
		  <input type="radio" ng-model="newPedido.derivador" value="Derivado" name="optradio">Derivado
		</label>
		<label class="radio-inline">
		  <input type="radio" ng-model="newPedido.derivador" value="Internado" name="optradio">Internado
		</label>
		<label class="radio-inline">
		  <input type="text" style="width:470px" maxlength="40" ng-model="newPedido.derivadorDescripcion" class="form-control">
		</label>
		</div>
			
	</div>
	
    <div class="form-group row" ng-controller="medicoController">
        <label class="control-label" for="medico">Medico:</label>
        <input type="text" class="form-control" ng-model="medicoSelected" id="medico" placeholder="Ingrese el nombre/matricula del medico...">
		<div class="form-group row" ng-show="!isEmpty(medicoSelected)">
			<table class="table table-striped">
				<thead>
				</thead>
				<tbody ng-repeat="medico in medicosList | filter:medicoSelected | limitTo:5">
				<tr>
					<td>{{medico.nombre}}</td>
					<td>{{medico.matricula}}</td>
					<td><a href ng-click="agregarMedico(medico)" ng-model="newPedido.medico" data-toggle="collapse"><span class="glyphicon glyphicon-plus"></span></a>
					</td>
				</tr>
				</tbody>
			</table>
		</div>
    </div>
	<div class="form-group row">
        <label class="control-label" for="diagnostico">Diagnostico:</label>
        <input type="text" class="form-control" ng-model="newPedido.diagnostico" id="diagnostico" placeholder="Ingrese el diagnostico...">
    </div>
	<div ng-controller="analisisController">
	<div class="form-group row" ng-controller="analisisController" >
        <label  class="control-label" for="analisis">Estudios:</label>
		
        <input type="text" class="form-control" ng-model="miFilter" id="analisis" placeholder="Ingrese el nombre/codigo del analisis...">
		<div class="form-group row" ng-show="!isEmpty(miFilter)">
			<table class="table table-striped">
				<thead>
				</thead>
				<tbody ng-repeat="lab in analisisList | filter:miFilter | limitTo:5">
				<tr>
					<td>{{lab.codigo}}</td>
					<td>{{lab.determinaciones}}</td>
					<td><a href ng-click="addAnalisis(lab)" data-toggle="collapse"><span class="glyphicon glyphicon-plus"></span></a>
				</tr>
				</tbody>
				</tbody>
			</table>
		</div>
	</div>
    <div class="form-group row">
	<label  class="control-label " for="analisisfilter"></label>
	
				<div class="panel panel-info" id="analisisfilter">
					<div class="panel-heading">
						<h3 class="panel-title">Listado de Estudios</h3>
					</div>
					<table class="table table-hover" >
						<thead>
							<tr>
								<th>Codigo</th>
								<th>Determinaciones</th>
							</tr>
						</thead>
						<tbody ng-repeat="an in analisisListFiltered track by $index">
							<tr>
								<td>{{an.codigo}}</td>
								<td>{{an.determinaciones}}</td>
								<td><a href ng-click="removeAnalisis($index)" data-toggle="collapse"><span class="glyphicon glyphicon-trash"></span></a>
							</tr>
						</tbody>
					</table>
				</div>
			</div>
	</div>
	<div>
	<button type="submit" style="float:right" class="btn btn-primary" ng-click="createPedido()">Generar Pedido</button>
	<div>
	
</div>

	<div class="ani" ng-show="created" >
	  <dialog class="alert alert-success">
		<a href="#" class="close" data-dismiss="alert" aria-label="close">&times;</a>
		<strong>Success!</strong> El pedido ha sido generado exitosamente.
	  </dialog>
	</div>
	
</form>
</div>
